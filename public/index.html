<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Patient Codex</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <h1>AI Patient Codex</h1>
      <p class="tagline">Wound-care agent orchestration — clinician guided, privacy first.</p>
    </header>

    <section>
      <h2>Agentic Flow Overview</h2>
      <p>
        The system captures structured wound-care data step by step, ensuring every field is
        traceable, clinician approved, and stored in a single <code>CaseRecord</code> JSON document.
      </p>
    </section>

    <section id="flow-intro">
      <h2>Kick Off A Session</h2>
      <p>
        Each intake flows through the orchestrator: collect demographics, validate images, log vitals,
        complete T.I.M.E scoring, resolve gaps, assemble the JSON case record, bind to the clinician PIN,
        then sync. Let’s start by confirming you’re ready.
      </p>

      <div class="cta-card">
        <div class="cta-message" id="cta-message">
          <strong>Step 1:</strong> Confirm readiness to start the data capture flow.
        </div>
        <div class="cta-actions" id="cta-actions">
          <button type="button" data-action="ready">Ready</button>
        </div>
      </div>
    </section>

    <section>
      <h2>Design Principles</h2>
      <ul>
        <li>Clinician-in-the-loop validation at every checkpoint.</li>
        <li>No medical advice — agents only collect, clarify, and summarize.</li>
        <li>Strict privacy defaults with consent gating and PIN binding.</li>
        <li>Structured outputs with provenance for every entry.</li>
      </ul>
    </section>

    <section>
      <h2>Core Agents</h2>
      <ol>
        <li>Session Orchestrator</li>
        <li>Identity &amp; Consent Intake</li>
        <li>OCR &amp; Transcription</li>
        <li>Wound Imaging QA</li>
        <li>Vitals</li>
        <li>T.I.M.E Capture</li>
        <li>Follow-up Resolution</li>
        <li>Data Steward &amp; JSON Assembler</li>
        <li>Security &amp; PIN Linker</li>
        <li>Export &amp; Sync</li>
      </ol>
    </section>

    <section>
      <h2>Guardrails</h2>
      <ul>
        <li>Neutral follow-ups only, no clinical advice.</li>
        <li>Consent required before storage or export.</li>
        <li>PII minimized and redacted in summaries.</li>
        <li>Autosave snapshots on each state transition.</li>
      </ul>
    </section>

    <section>
      <h2>Docs &amp; Source</h2>
      <p>
        Explore the detailed specification in
        <a href="https://github.com/christo/ai-patient-codex/blob/main/AGENTS.md">AGENTS.md</a>
        on GitHub.
      </p>
    </section>

    <footer>
      <p>No clinical advice is ever provided by this application.</p>
    </footer>

    <script>
      const actions = document.querySelector("#cta-actions");
      const message = document.querySelector("#cta-message");

      const renderInputOptions = () => {
        message.innerHTML =
          "<strong>Step 2:</strong> How will the patient data be supplied? Select an intake modality.";
        actions.innerHTML = `
          <button type="button" data-mode="image">Image Upload</button>
          <button type="button" data-mode="text">Structured Text</button>
          <button type="button" data-mode="audio">Audio Transcript</button>
        `;
      };

      const renderHandoff = (mode) => {
        const modeLabel =
          mode === "image"
            ? "Wound imaging queued for QA"
            : mode === "audio"
            ? "Transcription agent primed"
            : "Structured form ready";

        message.innerHTML = `
          <strong>Step 3:</strong> ${modeLabel}. Session Orchestrator is initializing the
          agent stack for you (BIO intake → Wound Imaging QA → Vitals → T.I.M.E → Follow-up →
          Assemble JSON → PIN binding → Export).`;
        actions.innerHTML = `
          <span class="handoff">AI agents are taking over from here. Clinician approval still required before storage.</span>
        `;
      };

      actions.addEventListener("click", (event) => {
        const target = event.target;
        if (!(target instanceof HTMLButtonElement)) return;

        if (target.dataset.action === "ready") {
          renderInputOptions();
          return;
        }

        if (target.dataset.mode) {
          renderHandoff(target.dataset.mode);
        }
      });
    </script>
  </body>
</html>
